(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1babd9c7"],{"07bd":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"project"},[a("div",{staticClass:"section-wrapper"},[a("div",{staticClass:"table-controller"},[a("div",{staticClass:"controller-list"},[a("div",{staticClass:"controller-item"},[a("Input",{staticClass:"controller-input",attrs:{suffix:"ios-search",placeholder:"请输入搜索内容"},on:{"on-change":t.onInputParams},model:{value:t.filters.query,callback:function(e){t.$set(t.filters,"query",e)},expression:"filters.query"}})],1)]),a("div",{staticClass:"new-add"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.add()}}},[t._v("新增")])],1)]),a("Table",{staticStyle:{margin:"15px 0"},attrs:{loading:t.tableLoading,columns:t.columns,data:t.data},scopedSlots:t._u([{key:"action",fn:function(e){var o=e.row;return[a("Button",{attrs:{type:"success"},on:{click:function(e){return t.edit(o)}}},[t._v("编辑")]),a("Button",{staticStyle:{"margin-left":"5px"},attrs:{type:"error"},on:{click:function(e){return t._delete(o)}}},[t._v("删除")])]}}])}),a("div",{staticClass:"page"},[a("Page",{attrs:{total:t.total,"show-sizer":"","show-total":"","show-elevator":"",current:t.page,"page-size":t.pageSize},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1)],1),a("Modal",{attrs:{title:t.title},on:{"on-visible-change":t.closeModal},model:{value:t.projectModal,callback:function(e){t.projectModal=e},expression:"projectModal"}},[a("Form",{ref:"form",attrs:{model:t.form,rules:t.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"项目ID",prop:"code"}},[a("Input",{attrs:{placeholder:"输入项目ID"},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}})],1),a("FormItem",{attrs:{label:"项目名称",prop:"name"}},[a("Input",{attrs:{placeholder:"输入项目名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),a("template",{slot:"footer"},[a("Button",{on:{click:function(e){t.projectModal=!1}}},[t._v("取消")]),a("Button",{attrs:{type:"success",loading:t.loading},on:{click:t.save}},[t._v("确定")])],1)],2)],1)},n=[],i=a("cebc"),c=a("8b55"),s=a("24d2"),r={data:function(){var t=this,e=function(e,a,o){var n=e.field;"编辑项目"!==t.title||t.form[n]!==t.editParams[n]?Object(s["b"])(n,a).then(function(t){t>0?o(new Error("已经存在相同的项目ID")):o()}):o()};return{filters:{query:""},title:"新增项目",tableLoading:!1,data:[],columns:[{title:"项目ID",key:"code",align:"center"},{title:"项目名称",key:"name",align:"center"},{title:"操作",slot:"action",align:"center"}],page:1,pageSize:10,total:1,projectModal:!1,loading:!1,form:{code:"",name:""},editParams:{},ruleValidate:{code:[{required:!0,message:"请选择项目名称",trigger:"blur"},{validator:e,trigger:"blur"}],name:[{required:!0,message:"请选择项目名称",trigger:"blur"}]}}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;this.tableLoading=!0,Object(s["f"])({page:this.page,size:this.pageSize,query:this.filters.query}).then(function(e){var a=e.list,o=e.total;t.data=a,t.total=o,t.tableLoading=!1}).catch(function(){t.tableLoading=!1})},onInputParams:Object(c["a"])(function(){this.getData()},600),changePage:function(t){this.page=t,this.getData()},changePageSize:function(t){this.pageSize=t,this.getData()},_delete:function(t){var e=this;this.$Modal.confirm({title:"删除项目",content:"<p>确认删除此项目？</p>",onOk:function(){Object(s["c"])(t.id).then(function(){e.$Message.success("删除成功"),e.getData()}).catch(function(){})}})},save:function(){var t=this;this.$refs.form.validate(function(e){e&&(t.loading=!0,"新增项目"===t.title?Object(s["a"])(t.form).then(function(){t.$Message.success("新增成功"),t.getData(),t.loading=!1,t.projectModal=!1}).catch(function(){t.loading=!1,t.projectModal=!1}):Object(s["d"])(t.form).then(function(){t.$Message.success("编辑成功"),t.getData(),t.loading=!1,t.projectModal=!1}).catch(function(){t.loading=!1,t.projectModal=!1}))})},add:function(){this.projectModal=!0,this.title="新增项目"},edit:function(t){this.projectModal=!0,this.title="编辑项目",this.form=Object(i["a"])({},t),this.editParams=t},closeModal:function(t){t&&this.$refs.form.resetFields()}}},l=r,u=(a("5062"),a("2877")),d=Object(u["a"])(l,o,n,!1,null,"2c9133c4",null);e["default"]=d.exports},5062:function(t,e,a){"use strict";var o=a("a580"),n=a.n(o);n.a},a580:function(t,e,a){}}]);
//# sourceMappingURL=chunk-1babd9c7.a180a2d6.js.map