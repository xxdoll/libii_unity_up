(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46a4c348"],{"2ed0":function(e,t,a){"use strict";var i=a("cdb8"),l=a.n(i);l.a},cdb8:function(e,t,a){},fc19:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"white-list"},[a("div",{staticClass:"section-wrapper"},[a("div",{staticClass:"table-controller"},[a("div",{staticClass:"controller-list"},[a("div",{staticClass:"controller-item"},[a("span",{staticClass:"controller-label"},[e._v("项目ID：")]),a("Select",{staticClass:"controller-input",attrs:{filterable:"",placeholder:"请选择项目ID"},on:{"on-change":function(t){return e.getData(!0)}},model:{value:e.filters.bundleId,callback:function(t){e.$set(e.filters,"bundleId",t)},expression:"filters.bundleId"}},[a("Option",{attrs:{value:"all"}},[e._v("全部")]),e._l(e.projectList,function(t){return a("Option",{key:t.id,attrs:{value:t.code}},[e._v(e._s(t.code))])})],2)],1),a("div",{staticClass:"controller-item"},[a("span",{staticClass:"controller-label"},[e._v("设备ID：")]),a("Select",{staticClass:"controller-input",attrs:{filterable:"",placeholder:"请选择设备ID"},on:{"on-change":function(t){return e.getData(!0)}},model:{value:e.filters.deviceId,callback:function(t){e.$set(e.filters,"deviceId",t)},expression:"filters.deviceId"}},[a("Option",{attrs:{value:"all"}},[e._v("全部")]),e._l(e.deviceList,function(t){return a("Option",{key:t.id,attrs:{value:t.deviceId}},[e._v(e._s(t.deviceId))])})],2)],1)]),a("div",{staticClass:"new-add"},[a("Button",{attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[e._v("新增")])],1)]),a("Table",{attrs:{columns:e.columns,data:e.data,loading:e.tableLoading},scopedSlots:e._u([{key:"action",fn:function(t){var i=t.row;return[a("Button",{attrs:{type:"error"},on:{click:function(t){return e._delete(i)}}},[e._v("删除")])]}}])}),a("div",{staticClass:"page"},[a("Page",{attrs:{total:e.total,"show-sizer":"","show-total":"","show-elevator":"",current:e.page,"page-size":e.pageSize},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1)],1),a("Modal",{attrs:{title:e.title},on:{"on-visible-change":e.closeModal},model:{value:e.whiteModal,callback:function(t){e.whiteModal=t},expression:"whiteModal"}},[a("Form",{ref:"form",attrs:{model:e.form,rules:e.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"项目ID",prop:"bundleId"}},[a("Select",{attrs:{filterable:"",placeholder:"请选择项目ID"},model:{value:e.form.bundleId,callback:function(t){e.$set(e.form,"bundleId",t)},expression:"form.bundleId"}},e._l(e.projectList,function(t){return a("Option",{key:t.id,attrs:{value:t.code}},[e._v(e._s(t.code))])}),1)],1),a("FormItem",{attrs:{label:"设备ID",prop:"deviceId"}},[a("Select",{attrs:{filterable:"",placeholder:"请选择设备ID"},model:{value:e.form.deviceId,callback:function(t){e.$set(e.form,"deviceId",t)},expression:"form.deviceId"}},e._l(e.deviceList,function(t){return a("Option",{key:t.id,attrs:{value:t.deviceId}},[e._v(e._s(t.deviceId))])}),1)],1)],1),a("template",{slot:"footer"},[a("Button",{on:{click:function(t){e.whiteModal=!1}}},[e._v("取消")]),a("Button",{attrs:{type:"success",loading:e.loading},on:{click:e.save}},[e._v("确定")])],1)],2)],1)},l=[],n=a("cebc"),o=a("2f62"),s=a("0d5e");function c(e){return s["b"].get("/white-list/list",{params:e})}function d(e){return s["b"].post("/white-list",e)}function r(e){return s["b"].delete("/white-list",{params:e})}var u={data:function(){return{columns:[{title:"项目ID",key:"bundleId",align:"center"},{title:"设备ID",key:"deviceId",align:"center"},{title:"操作",slot:"action",align:"center"}],filters:{bundleId:"all",deviceId:"all"},data:[],page:1,pageSize:10,total:0,whiteModal:!1,title:"新增白名单",loading:!1,form:{bundleId:"",deviceId:""},ruleValidate:{bundleId:[{required:!0,message:"请选择项目",trigger:"blur"}],deviceId:[{required:!0,message:"请选择项目设备",trigger:"blur"}]},tableLoading:!1}},mounted:function(){this.getData()},methods:{getData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.tableLoading=!0,t&&(this.page=1),c({page:this.page,size:this.pageSize,bundleId:"all"===this.filters.bundleId?"":this.filters.bundleId,deviceId:"all"===this.filters.deviceId?"":this.filters.deviceId}).then(function(t){var a=t.list,i=t.total;e.data=a,e.total=i,e.tableLoading=!1}).catch(function(){e.tableLoading=!1})},changePage:function(e){this.page=e,this.getData()},changePageSize:function(e){this.pageSize=e,this.getData()},_delete:function(e){var t=this;this.$Modal.confirm({title:"删除白名单",content:"<p>确认删除此白名单？</p>",onOk:function(){r({deviceId:e.deviceId,bundleId:e.bundleId}).then(function(){t.$Message.success("删除成功"),t.getData()})}})},save:function(){var e=this;this.$refs.form.validate(function(t){t&&(e.loading=!0,d(e.form).then(function(){e.$Message.success("新增成功"),e.page=1,e.getData(),e.loading=!1,e.whiteModal=!1}).catch(function(){e.loading=!1}))})},closeModal:function(e){e&&this.$refs.form.resetFields()},add:function(){this.whiteModal=!0,this.title="新增白名单"}},computed:Object(n["a"])({},Object(o["d"])(["projectList","deviceList"]))},f=u,v=(a("2ed0"),a("2877")),g=Object(v["a"])(f,i,l,!1,null,"a7ad51dc",null);t["default"]=g.exports}}]);
//# sourceMappingURL=chunk-46a4c348.3dbb7a7d.js.map